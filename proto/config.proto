syntax = "proto2";
package proto;

import "input.proto";
import "enums.proto";
import "device.proto";

message Profile {
  required uint32 uid = 1;
  required FaceButtonMappingMode faceButtonMappingMode = 2;
  repeated Mapping mappings = 4;
  required string name = 5;
  required SubType deviceToEmulate = 6;
  repeated ProfileAssignmentInfo assignments = 8;
}

message SpecificUsbDevice {
  required uint32 vid = 1;
  required uint32 pid = 2;
}

message ProfileAssignmentInfo {
  oneof assignment {
    ConsoleType consoleType = 4;
    WiiExtType wiiExt = 5;
    PS2ControllerType ps2Cnt = 6;
    SubType usbType = 7;
    SpecificUsbDevice usbDevice = 8;
    bool catchall = 9;
    InputActivationTrigger input = 10; // Input at startup
    InputActivationTrigger inputAnyTime = 11; // Input at any time
    uint32 copilotProfile = 12; // copilot another profile
    uint32 midiChannel = 13;
  }
}

message ProfileAssignment {
  repeated ProfileAssignmentInfo assignments = 1;
}

message Config {
  repeated Device devices = 2;
  repeated Profile profiles = 3;
}

message ConfigInfo {
  required int32 dataSize = 1;
  required int32 dataCrc = 2;
  required int32 magic = 3;
}

message GetActiveProfiles {
  repeated int32 profiles = 1;
}

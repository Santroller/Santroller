syntax = "proto2";

package proto;
import "enums.proto";

message UARTDevice {
  required int32 block = 1;
  required int32 tx = 2;
  required int32 rx = 3;
  required int32 baudrate = 4;
}

message I2CDevice {
  required int32 block = 1;
  required int32 sda = 2;
  required int32 scl = 3;
  required int32 clock = 4;
}

message SPIDevice {
  required int32 block = 1;
  required int32 mosi = 2;
  required int32 miso = 3;
  required int32 sck = 4;
  required int32 clock = 5;
}
message PeripheralDevice {
  required I2CDevice i2c = 1;
  required int32 address = 2;
}

message AccelerometerDevice { required I2CDevice i2c = 1; }

message Max1704xDevice { required I2CDevice i2c = 1; }

message Mpr121Device {
  required I2CDevice i2c = 1;
  required int32 touchpadCount = 2;
  required int32 ddrPins = 3;    // pin data direction register
  required int32 enablePins = 4; // pin enable
}
message ADS1115Device {
  required I2CDevice i2c = 1;
  required int32 interrupt = 2;
}

message WiiDevice {
  required I2CDevice i2c = 1;
  required MappingMode mappingMode = 2;
}

message CrazyGuitarNeckDevice { required I2CDevice i2c = 1; }

message GuitarHero5NeckDevice { required I2CDevice i2c = 1; }

message DJHeroTurntableDevice { 
  required I2CDevice i2c = 1; 
  required bool left = 2;
}

message BandHeroDrumDevice { required I2CDevice i2c = 1; }

message SerialMidiDevice { required UARTDevice uart = 1; }
message CrkdNeckDevice { required UARTDevice uart = 1; }
message DebugDevice { required UARTDevice uart = 1; }
message UsbHostDevice {
  required int32 firstPin = 1;
  required bool enable5v = 2;
  required bool dmFirst = 3;
  required MappingMode mappingMode = 4;
}
message MultiplexerDevice {
  required int32 inputPin = 1;
  required bool sixteenChannel = 2;
  required int32 s0Pin = 3;
  required int32 s1Pin = 4;
  required int32 s2Pin = 5;
  required int32 s3Pin = 6;
}
message WorldTourDrumDevice { required SPIDevice spi = 1; }
message PSXDevice {
  required SPIDevice spi = 1;
  required int32 attPin = 2;
  required int32 ackPin = 3;
  required MappingMode mappingMode = 4;
}
message SNESDevice {
  required int32 clockPin = 1;
  required int32 latchPin = 2;
  required int32 dataPin = 3;
  required MappingMode mappingMode = 4;
}
message JoybusDevice {
  required int32 dataPin = 1;
  required MappingMode mappingMode = 2;
}

message WiiEmulationDevice { required I2CDevice i2c = 1; }
message PSXEmulationDevice {
  required int32 dataPin = 1;
  required int32 commandPin = 2;
  required int32 attentionPin = 3;
  required int32 clockPin = 4;
  required int32 acknowledgePin = 5;
}
message JoybusEmulationDevice { required int32 dataPin = 1; }
message EncoderDevice { required int32 dataPin = 1; }

message WS2812Device { 
  required int32 pin = 1; 
  required WS2812Type type = 2; 
  required int32 count = 3;
}
message APA102Device { 
  required SPIDevice spi = 1; 
  required APA102Type type = 2; 
  required int32 count = 3;
}
message STP16CPCDevice { 
  required SPIDevice spi = 1;
  required int32 oe = 2; 
  required int32 le = 3; 
  required int32 count = 4;
}

message Device {
  oneof device {
    AccelerometerDevice accelerometer = 1;
    Max1704xDevice max1704x = 4;
    Mpr121Device mpr121 = 5;
    WiiDevice wii = 6;
    CrazyGuitarNeckDevice crazyGuitarNeck = 7;
    GuitarHero5NeckDevice gh5Neck = 8;
    DJHeroTurntableDevice djhTurntable = 9;
    BandHeroDrumDevice bhDrum = 10;
    SerialMidiDevice midiSerial = 11;
    UsbHostDevice usbHost = 12;
    MultiplexerDevice multiplexer = 13;
    WorldTourDrumDevice worldTourDrum = 14;
    PSXDevice psx = 15;
    SNESDevice snes = 16;
    JoybusDevice joybus = 17;
    WiiEmulationDevice wiiEmulation = 18;
    PSXEmulationDevice psxEmulation = 19;
    JoybusEmulationDevice joybusEmulation = 20;
    PeripheralDevice peripheral = 21;
    CrkdNeckDevice crkdNeck = 22;
    ADS1115Device ads1115 = 23;
    EncoderDevice encoder = 24;
    DebugDevice debug = 25;
    WS2812Device ws2812 = 26;
    APA102Device apa102 = 27;
    STP16CPCDevice stp16cpc = 28;
  }
}
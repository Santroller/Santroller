syntax = "proto2";

package proto;
import "enums.proto";
import "input_enums.proto";
import "device.proto";

message GPIOInput {
  required int32 pin = 1;
  required PinMode pinMode = 2;
  required bool analog = 3;
}
message ADS1115Input {
  required int32 deviceid = 1;
  required int32 channel = 2;
}
message AccelerometerInput {
  required int32 deviceid = 1;
  required AccelerometerInputType type = 2;
}

message MPR121Input {
  required int32 deviceid = 1;
  required int32 pin = 2;
  required Mpr121PinMode mode = 3;
  required PinMode pinMode = 4;
}

message MidiNoteInput { 
  required int32 deviceid = 1;
  required int32 note = 2; 
}

message MidiControlChangeInput { 
  required int32 deviceid = 1;
  required int32 cc = 2; 
}

message MidiPitchBendInput { 
  required int32 deviceid = 1; 
}

message FixedInput { required int32 value = 1; }

message WiiAxisInput {
  required int32 deviceid = 1;
  required WiiAxisType axis = 2;
}

message WiiButtonInput {
  required int32 deviceid = 1;
  required WiiButtonType button = 2;
}

message CrkdNeckButtonInput {
  required int32 deviceid = 1;
  required CrkdNeckButtonType button = 2;
}

message Gh5NeckButtonInput {
  required int32 deviceid = 1;
  required Gh5NeckButtonType button = 2;
}

message MouseAxisInput {
  required int32 deviceid = 1;
  required MouseAxisType axis = 2;
}

message MouseButtonInput {
  required int32 deviceid = 1;
  required MouseButtonType button = 2;
}

message KeyboardKeyInput {
  required int32 deviceid = 1;
  required int32 key = 2;
}

message ShortcutInput {
  repeated Input inputs = 1;
}

message WiiExtensionTypeInput {
  required int32 deviceid = 1;
  required WiiExtType ext = 2;
}
message PS2ControllerTypeInput {
  required int32 deviceid = 1;
  required PS2ControllerType type = 2;
}
message UsbDeviceTypeInput {
  required int32 deviceid = 1;
  required UsbDeviceType type = 2;
  required SubType subtype = 3;
}
message BluetoothDeviceTypeInput {
  required int32 deviceid = 1;
  required UsbDeviceType type = 2;
  required SubType subtype = 3;
}

message Input {
  oneof input {
    GPIOInput gpio = 1;
    FixedInput fixed = 2;
    MPR121Input mpr121 = 3;
    MidiNoteInput midiNote = 4;
    MidiControlChangeInput midiControlChange = 5;
    MidiPitchBendInput midiPitchBend = 6;
    MouseAxisInput mouseAxis = 7;
    MouseButtonInput mouseButton = 8;
    WiiAxisInput wiiAxis = 9;
    WiiButtonInput wiiButton = 10;
    KeyboardKeyInput key = 11;
    CrkdNeckButtonInput crkd = 12;
    ShortcutInput shortcut = 13;
    ADS1115Input ads1115 = 14;
    AccelerometerInput accelerometer = 15;
    Gh5NeckButtonInput gh5Neck = 16;
  }
}
message InputActivationTrigger {
  required Input input = 1;
  optional bool inverted = 2;
  optional AnalogToDigitalTriggerType trigger = 3;
  optional int32 triggerValue = 4;
}

message ActivationTrigger {
  oneof trigger {
    InputActivationTrigger input = 1; // Input at startup
    InputActivationTrigger inputAnyTime = 2; // Input at any time
    ConsoleMode console = 3; // Console mode
    WiiExtensionTypeInput wii = 4; // Wii Extension type
    PS2ControllerTypeInput ps2 = 5; // Ps2 Extension type
    UsbDeviceTypeInput usb = 6; // Usb device type
    BluetoothDeviceTypeInput bluetooth = 7; // bluetooth input type
    uint32 linkedProfile = 8; // linked profile - both profiles will be active at the same time, for mixed inputs
    uint32 midiChannel = 9; // midi channel of plugged in device
  }
}

message Mapping {
  oneof mapping {
    GamepadButtonType gamepadButton = 1;
    GamepadAxisType gamepadAxis = 2;
    GuitarHeroGuitarButtonType ghButton = 3;
    GuitarHeroGuitarAxisType ghAxis = 4;
    RockBandGuitarButtonType rbButton = 5;
    RockBandGuitarAxisType rbAxis = 6;
    GuitarHeroDrumsButtonType ghDrumButton = 7;
    GuitarHeroDrumsAxisType ghDrumAxis = 8;
    RockBandDrumsButtonType rbDrumButton = 9;
    RockBandDrumsAxisType rbDrumAxis = 10;
    GuitarHeroLiveGuitarButtonType ghlButton = 11;
    GuitarHeroLiveGuitarAxisType ghlAxis = 12;
    ProGuitarButtonType proButton = 13;
    ProGuitarAxisType proAxis = 14;
    DJHTurntableButtonType djhButton = 15;
    DJHTurntableAxisType djhAxis = 16;
    DJMaxTurntableButtonType djMaxButton = 17;
    DJMaxTurntableAxisType djMaxAxis = 18;
    ProjectDivaButtonType divaButton = 19;
    ProjectDivaAxisType divaAxis = 20;
    GuitarFreaksAxisType gfAxis = 21;
    GuitarFreaksButtonType gfButton = 22;
    GuitarHeroArcadeAxisType ghaAxis = 23;
    GuitarHeroArcadeButtonType ghaButton = 24;
    MouseAxisType mouseAxis = 25;
    MouseButtonType mouseButton = 26;
    int32 keycode = 27;
  }

  required Input input = 28;
  optional bool inverted = 29;
  optional Input pressureInput = 30; // if there is no pressureInput, then set the pressures to max when the button is pressed
  optional AnalogToDigitalTriggerType trigger = 31;
  optional int32 pressed = 32;
  optional int32 released = 33;
  optional int32 min = 34;
  optional int32 max = 35;
  optional int32 center = 36;
  optional int32 deadzone = 37;
  optional int32 triggerValue = 38;
  optional uint32 debounce = 39;
}